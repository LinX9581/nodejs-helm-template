# nodejs-helm-bn-template values

image:
  repository: asia-docker.pkg.dev/nownews-terraform/nodejs-dev-template/nodejs-dev-fn-template
  pullPolicy: IfNotPresent
  tag: "1.0.2"

service:
  type: ClusterIP
  port: 3022

application:
  port: 3022

configMap:
  create: true
  name: ""
  data:
    APP_ENV: "prod"
    PORT: "3022"

envFrom:
  configMap:
    enabled: true
    name: ""
  configMapRefs: []
  secretRefs: []

resources:
  limits:
    cpu: 200m
    memory: 1024Mi
  requests:
    cpu: 50m
    memory: 256Mi

autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80

updateStrategy:
  type: RollingUpdate
  maxUnavailable: 0
  maxSurge: 1

nodeSelector:
  workload: app
tolerations: []
affinity: {}

gateway:
  enabled: true
  gatewayName: traefik-gateway
  gatewayNamespace: traefik
  routes:
    - hostname: nodejs-bn.linx.bar
  rules:
    - path: /
      pathType: PathPrefix
  redirectRoutes: []

healthCheckPolicy:
  enabled: false
  requestPath: /pod-health
  checkIntervalSec: 5
  timeoutSec: 5
  healthyThreshold: 2
  unhealthyThreshold: 2

otel:
  enabled: true
  injectorAnnotationKey: instrumentation.opentelemetry.io/inject-nodejs
  injectorAnnotationValue: "true"
  instrumentation:
    enabled: true
    name: otel-instrumentation
    syncWave: "-1"
    exporter:
      endpoint: http://otel-collector-opentelemetry-collector.observability.svc.cluster.local:4318
    nodejs:
      image: ghcr.io/open-telemetry/opentelemetry-operator/autoinstrumentation-nodejs:latest
      protocol: http/protobuf
      tracesEndpoint: http://otel-collector-opentelemetry-collector.observability.svc.cluster.local:4318/v1/traces
      serviceName: ""
      metricsExporter: otlp
      metricsEndpoint: http://otel-collector-opentelemetry-collector.observability.svc.cluster.local:4318/v1/metrics
  
imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}
podSecurityContext:
  runAsNonRoot: false
  seccompProfile:
    type: RuntimeDefault
securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
